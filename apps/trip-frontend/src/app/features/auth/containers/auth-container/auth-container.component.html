
<div class="flex items-center justify-center min-h-screen p-4 bg-tp-bg-light dark:bg-tp-bg-primary">
  <!-- Global Toast Notification -->
  @if (toastMessage(); as toast) {
    <div class="fixed top-6 left-1/2 transform -translate-x-1/2 z-50 w-11/12 max-w-md">
      <div [class]="getToastClasses(toast.type)">
        <div class="flex items-center">
          @if (toast.type === 'success') {
            <svg xmlns="http://www.w3.org/2000/svg" class="flex-shrink-0 w-5 h-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
          } @else {
            <svg xmlns="http://www.w3.org/2000/svg" class="flex-shrink-0 w-5 h-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
          }
          <span class="toast-message">{{ toast.message }}</span>
        </div>
        <button type="button" class="bg-transparent border-none cursor-pointer text-current opacity-70 transition-opacity duration-200 hover:opacity-100" (click)="dismissToast()" aria-label="Dismiss notification">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
        </button>
      </div>
    </div>
  }

  <!-- Centered Authentication Card -->
  <div class="w-full max-w-xl p-8 bg-white dark:bg-tp-bg-tertiary rounded-xl shadow-xl border border-tp-border-light dark:border-tp-border">
    <div class="text-center mb-8">
      <h1 class="text-4xl font-extrabold text-tp-text-light-primary dark:text-tp-text-primary">Trip Planner</h1>
      @switch (currentForm()) {
        @case ('login') { <p class="mt-2 text-tp-text-light-secondary dark:text-tp-text-secondary">Welcome back! Please sign in.</p> }
        @case ('register') { <p class="mt-2 text-tp-text-light-secondary dark:text-tp-text-secondary">Create your account to get started.</p> }
        @case ('recover') { <p class="mt-2 text-tp-text-light-secondary dark:text-tp-text-secondary">Recover your password.</p> }
        @case ('change-password') { <p class="mt-2 text-tp-text-light-secondary dark:text-tp-text-secondary">Choose a new, secure password.</p> }
        @default { <p class="mt-2 text-tp-text-light-secondary dark:text-tp-text-secondary">Welcome.</p> }
      }
    </div>

    <div class="w-full">
      @switch (currentForm()) {
        @case ('login') {
          <app-login-form
            [isLoading]="isLoading()"
            (loginSubmit)="handleLogin($event)">
          </app-login-form>
        }
        @case ('register') {
          <app-register-form
            [isLoading]="isLoading()"
            (registerSubmit)="handleRegister($event)">
          </app-register-form>
        }
        @case ('recover') {
          <app-recover-password-form
            [isLoading]="isLoading()"
            (recoverPasswordSubmit)="handleRecoverPassword($event.email)">
          </app-recover-password-form>
        }
        @case ('change-password') {
          <app-change-password-form
            [isLoading]="isLoading()"
            (cancelPasswordChange)="handleCancel()"
            (changePasswordSubmit)="handleChangePassword($event)">
          </app-change-password-form>
        }
      }
    </div>
  </div>
</div>
